From 3f783e3b2ff0814a9e0f0f4fdd8b2efba14c8fd4 Mon Sep 17 00:00:00 2001
From: Dinh Nguyen <dinh.nguyen@intel.com>
Date: Tue, 2 Feb 2021 15:13:24 -0800
Subject: [PATCH 03/13] arm64: dts: n5x: Add gmac entry

commit  2297f337f004a9be1594d3563b464ce54d8f4d78 from
https://github.com/altera-opensource/linux-socfpga.git

Add the gmac ethernet node.

Signed-off-by: Dinh Nguyen <dinh.nguyen@intel.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 .../boot/dts/intel/socfpga_n5x_socdk.dts      | 30 +++++++++++++++++++
 1 file changed, 30 insertions(+)

diff --git a/arch/arm64/boot/dts/intel/socfpga_n5x_socdk.dts b/arch/arm64/boot/dts/intel/socfpga_n5x_socdk.dts
index 5f56e2697fee..32ad5adbb494 100644
--- a/arch/arm64/boot/dts/intel/socfpga_n5x_socdk.dts
+++ b/arch/arm64/boot/dts/intel/socfpga_n5x_socdk.dts
@@ -44,6 +44,36 @@
 	bus-width = <4>;
 };
 
+&gmac0 {
+        status = "okay";
+        phy-mode = "rgmii";
+        phy-handle = <&phy0>;
+
+        max-frame-size = <9000>;
+
+        mdio0 {
+                #address-cells = <1>;
+                #size-cells = <0>;
+                compatible = "snps,dwmac-mdio";
+                phy0: ethernet-phy@0 {
+                        reg = <4>;
+
+                        txd0-skew-ps = <0>; /* -420ps */
+                        txd1-skew-ps = <0>; /* -420ps */
+                        txd2-skew-ps = <0>; /* -420ps */
+                        txd3-skew-ps = <0>; /* -420ps */
+                        rxd0-skew-ps = <420>; /* 0ps */
+                        rxd1-skew-ps = <420>; /* 0ps */
+                        rxd2-skew-ps = <420>; /* 0ps */
+                        rxd3-skew-ps = <420>; /* 0ps */
+                        txen-skew-ps = <0>; /* -420ps */
+                        txc-skew-ps = <900>; /* 0ps */
+                        rxdv-skew-ps = <420>; /* 0ps */
+                        rxc-skew-ps = <1680>; /* 780ps */
+                };
+        };
+};
+
 &uart0 {
 	status = "okay";
 };
-- 
2.17.1

